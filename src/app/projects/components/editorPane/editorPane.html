<div class="content-editor-container" ng-show="vm.isLoaded">

    <div class="tags-list-container" layout="row" layout-align="start center" ng-if="!vm.isNew(vm.node)">
        <tag ng-repeat="tag in vm.tags track by tag.uuid"
             show-close="true"
             on-close="vm.removeTag(tag)"
             source="tag"></tag>

        <div flex></div>

        <div class="tags-input-wrapper">
            <tags-input on-add="vm.addTag(tag)"></tags-input>
        </div>
    </div>


    <div ng-if="vm.schema.binary">
        <div class="binary-label">
            Binary File: {{ vm.node.fileName || vm.binaryFile.name }}
            <span ng-if="vm.node.fileName">
                <a ng-href="{{ vm.getBinaryFileUrl() }}">download</a>
            </span>
        </div>

        <binary-file-input node="vm.node"
                           model="vm.binaryFile"
                           file-url="vm.getBinaryFileUrl()"
                           on-change="vm.setAsModified()"></binary-file-input>
    </div>


    <form-builder fields="vm.node.fields"
                  schema="vm.schema.fields"
                  display-field="vm.schema.displayField"
                  on-change="vm.setAsModified()"
                  perms="vm.node.permissions"></form-builder>

    <div layout="row" layout-align="center center" class="main-buttons">

        <button class="btn btn-primary"
                ng-click="vm.persist(vm.node)"
                ng-disabled="!vm.contentModified"
                aria-label="save">
            <i class="icon-save"></i>
            <span ng-if="!vm.isNew(vm.node)" translate>UPDATE</span>
            <span ng-if="vm.isNew(vm.node)" translate>CREATE</span>
        </button>

        <button class="btn btn-warn"
                ng-click="vm.remove(vm.node)"
                ng-disabled="!vm.canDelete(vm.node)"
                aria-label="delete">
            <i class="icon-delete"></i><span translate>DELETE</span>
        </button>
    </div>

</div>
<div>
    <form [formGroup]="form">
        <div class="row">
            <div class="small-12 medium-12 columns">
                <gtx-input formControlName="name"
                           [readonly]="readOnly"
                           [label]="'admin.project_label' | i18n">
                </gtx-input>
            </div>
        </div>
    </form>

    <mesh-admin-list [items]="tagFamilies$ | async"
                     [autoHidePagination]=true
                     [selectable]=false>

        <ng-template let-family="item">
            <div class="item-row">
                <div class="name">{{ family.familyData.name }}</div>
                <div class="tags">
                    <mesh-tag *ngFor="let tag of family.tags" [tag]="tag" (removeClick)="deleteTagClick(tag)"></mesh-tag>
                    <gtx-button type="primary"
                                flat
                                size="small"
                                class="add-tag-button"
                                (click)="addTagClick(family.familyData.name)">
                        <icon left>label_outline</icon>{{ 'editor.add_tag' | i18n }}
                    </gtx-button>
                </div>
                <div class="row-actions">
                    <gtx-dropdown-list>
                        <gtx-dropdown-trigger>
                            <gtx-button icon type="secondary"><icon>more_vert</icon></gtx-button>
                        </gtx-dropdown-trigger>
                        <gtx-dropdown-content>
                            <gtx-dropdown-item [class.disabled]="!family.familyData.permissions.update"
                                               (click)="updateTagFamilyClick(family.familyData.uuid)">
                                <icon>edit</icon> {{ 'admin.edit_tag_family' | i18n }}
                            </gtx-dropdown-item>

                            <gtx-dropdown-item class="alert"
                                               [class.disabled]="!family.familyData.permissions.delete"
                                               (click)="deleteTagFamilyClick(family.familyData.uuid)">
                                <icon>delete</icon> {{ 'admin.delete_tag_family' | i18n }}
                            </gtx-dropdown-item>
                        </gtx-dropdown-content>
                    </gtx-dropdown-list>
                </div>
            </div>
        </ng-template>
    </mesh-admin-list>
</div>

<div class="actions" *meshProjectTo="BREADCRUMBS_BAR_PORTAL_ID">
    <gtx-button type="primary"
                size="small"
                class="save-button"
                [disabled]="!isSaveButtonEnabled()"
                (click)="persistUser()">
        <ng-container *ngIf="!isNew">{{ 'admin.update_project' | i18n }}</ng-container>
        <ng-container *ngIf="isNew">{{ 'admin.create_project' | i18n }}</ng-container>
    </gtx-button>
</div>

